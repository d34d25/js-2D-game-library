function t({ctx:t,vertices:o,fillStyle:e="blue",alpha:a=1}){if(t.globalAlpha=a,t.strokeStyle="black",!(o.length<2)){t.beginPath(),t.moveTo(o[0].x,o[0].y);for(let e=1;e<o.length;e++)t.lineTo(o[e].x,o[e].y);t.closePath(),t.fillStyle=e,t.fill(),t.stroke(),t.globalAlpha=1}}function o({ctx:t,point:o={x:0,y:0},color:e="pink",radius:a=15,rotation:l=0,rotationIndicator:i=!1,alpha:n=1}){t.globalAlpha=n,t.strokeStyle="black",t.save(),t.translate(o.x,o.y),t.rotate(l),t.beginPath(),t.arc(0,0,a,0,2*Math.PI),t.fillStyle=e,t.fill(),t.stroke(),i&&(t.beginPath(),t.moveTo(0,0),t.lineTo(a,0),t.lineWidth=2,t.stroke()),t.restore(),t.globalAlpha=1}function e({ctx:t,vertices:o,strokeStyle:e="blue",lineWidth:a=2,alpha:l=1}){if(t.globalAlpha=l,t.strokeStyle="black",o&&!(o.length<2)){t.beginPath(),t.moveTo(o[0].x,o[0].y);for(let e=1;e<o.length;e++)t.lineTo(o[e].x,o[e].y);t.closePath(),t.strokeStyle=e,t.lineWidth=a,t.stroke(),t.globalAlpha=1}}function a({ctx:t,point:o={x:0,y:0},color:e="pink",radius:a=15,rotation:l=0,rotationIndicator:i=!1,alpha:n=1}){if(t.globalAlpha=n,t.strokeStyle="black",t.beginPath(),t.arc(o.x,o.y,a,0,2*Math.PI),t.strokeStyle=e,t.lineWidth=2,t.stroke(),i){const i=.7*a,n=o.x+Math.cos(l)*i,r=o.y+Math.sin(l)*i;t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(n,r),t.strokeStyle=e,t.lineWidth=2,t.stroke()}t.globalAlpha=1}function l({ctx:t,x:o=0,y:e=0,width:a=10,height:l=10,color:i="black",rotation:n=0,alpha:r=1}){t.globalAlpha=r,t.fillStyle=i,t.save(),t.translate(o+a/2,e+l/2),t.rotate(n),t.fillRect(-a/2,-l/2,a,l),t.restore(),t.globalAlpha=1}function i({ctx:t,x:o=0,y:e=0,width:a=100,height:l=100,color:i="green",rotation:n=0}){const r=o+a/2,s=e+l/2;t.save(),t.translate(r,s),t.rotate(n),t.translate(-r,-s);const h=o+a/2,c=e,d=o,g=e+l,p=o+a,f=e+l;t.fillStyle=i,t.beginPath(),t.moveTo(h,c),t.lineTo(d,g),t.lineTo(p,f),t.closePath(),t.fill(),t.restore()}function n({ctx:t,x:o=0,y:e=0,radius:a=50,innerColor:l="rgba(255, 255, 255, 1)",outerColor:i="rgba(51, 255, 0, 0)"}){const n=t.createRadialGradient(o,e,0,o,e,a);n.addColorStop(0,l),n.addColorStop(1,i),t.fillStyle=n,t.beginPath(),t.arc(o,e,a,0,2*Math.PI),t.fill()}function r({ctx:t,x:o=0,y:e=0,width:a=100,height:l=100,topColor:i="rgba(255, 255, 255, 1)",baseColor:n="rgba(229, 255, 0, 0)",rotation:r=0}){const s=o+a/2,h=e+l/2;t.save(),t.translate(s,h),t.rotate(r),t.translate(-s,-h);const c=o+a/2,d=e,g=o,p=e+l,f=o+a,y=e+l,b=(g+f)/2,x=(p+y)/2,u=t.createLinearGradient(c,d,b,x);u.addColorStop(0,i),u.addColorStop(1,n),t.fillStyle=u,t.beginPath(),t.moveTo(c,d),t.lineTo(g,p),t.lineTo(f,y),t.closePath(),t.fill(),t.restore()}class s{constructor({position:t={x:0,y:0},scale:o=1,rotation:e=0}){this.position=t,this.scale=o,this.rotation=e}drawWithCamera({ctx:t,canvas:o,drawScene:e}){t.save(),t.clearRect(0,0,o.width,o.height),t.translate(o.width/2,o.height/2),t.rotate(this.rotation),t.scale(this.scale,this.scale),t.translate(-this.position.x-o.width/2/this.scale,-this.position.y-o.height/2/this.scale),e(),t.restore()}}function h(t,o,e="red",a=1){t.strokeStyle=e,t.lineWidth=a;const l=o.maxX-o.minX,i=o.maxY-o.minY;t.strokeRect(o.minX,o.minY,l,i)}const c=function(){let t=performance.now(),o=0,e=0;const a=Object.assign(document.createElement("div"),{style:"position:fixed;top:10px;left:10px;background:#000;color:#0f0;padding:4px;font:12px monospace;z-index:9999"});return document.body.appendChild(a),function(){const l=performance.now();o++,l-t>=1e3&&(e=o,o=0,t=l),a.textContent="FPS: "+e}}();function d(t){const o=new Image;let e=!1;const a=[];return o.onload=()=>{e=!0,a.forEach(t=>t())},o.src=t,{img:o,get loaded(){return e},onLoad(t){e?t():a.push(t)},draw({ctx:t,x:a=0,y:l=0,scaleX:i=1,scaleY:n=1,rotationRadians:r=0,alpha:s=1,flipHorizontally:h=!1,flipVertically:c=!1}){if(e){t.globalAlpha=s,t.imageSmoothingEnabled=!1;const e=h?-1:1,d=c?-1:1,g=o.width*i,p=o.height*n;t.save(),t.translate(a+g/2,l+p/2),t.rotate(r),t.scale(e,d),t.drawImage(o,-g/2,-p/2,g,p),t.restore(),t.globalAlpha=1}}}}function g(t,o,e){if(!t.loaded)return console.warn("Image not loaded yet!"),[];const a=[],l=t.img.width,i=t.img.height,n=Math.ceil(l/o),r=Math.ceil(i/e);for(let l=0;l<r;l++)for(let i=0;i<n;i++)a.push({sx:i*o,sy:l*e,sWidth:o,sHeight:e,draw({ctx:o,dx:e=0,dy:a=0,scaleX:l=1,scaleY:i=1,rotationRadians:n=0,alpha:r=1,flipHorizontally:s=!1,flipVertically:h=!1}){if(!t.loaded)return;o.globalAlpha=r,o.imageSmoothingEnabled=!1;const c=s?-1:1,d=h?-1:1,g=this.sWidth*l,p=this.sHeight*i;o.save(),o.translate(e+g/2,a+p/2),o.rotate(n),o.scale(c,d),o.drawImage(t.img,this.sx,this.sy,this.sWidth,this.sHeight,-g/2,-p/2,g,p),o.restore(),o.globalAlpha=1}});return a}function p({spriteArray:t=[],startFrame:o=0,endFrame:e=1,animationSpeed:a=1,elapsedTime:l=0}){if(0===t.length)return null;const i=e-o+1,n=1/a;return t[o+Math.floor(l/n)%i]}class f{constructor({position:t={x:0,y:0},radius:o=10,intensity:e=1,color:a={r:255,g:200,b:100,a:.2}}){this.position=t,this.radius=o,this.intensity=e,this.color=a}}class y{constructor({position:t={x:0,y:0},angle:o=0,spread:e=6,length:a=100,intensity:l=1,color:i={r:255,g:200,b:100,a:.2}}){this.position=t,this.angle=o,this.spread=e,this.length=a,this.intensity=l,this.color=i}}function b({ctx:t,width:o=800,height:e=600,color:a="rgba(0, 0, 0, 1)",lights:l=[],hasColor:i=!0,x:n=-200,y:r=-200}){const s=document.createElement("canvas");s.width=o,s.height=e;const h=s.getContext("2d");h.fillStyle=a,h.fillRect(0,0,o,e),h.globalCompositeOperation="destination-out",l.forEach(o=>{const{position:e,intensity:a,color:l}=o,{x:s,y:c}=e,d=s-n,g=c-r;if("radius"in o){const{radius:e}=o;i&&(t.fillStyle=`rgba(${l.r}, ${l.g}, ${l.b}, ${.3*a})`,t.beginPath(),t.arc(s,c,e,0,2*Math.PI),t.fill());const n=h.createRadialGradient(d,g,0,d,g,e);n.addColorStop(0,`rgba(0, 0, 0, ${a})`),n.addColorStop(1,"rgba(0, 0, 0, 0)"),h.fillStyle=n,h.beginPath(),h.arc(d,g,e,0,2*Math.PI),h.fill()}else if("angle"in o&&"spread"in o&&"length"in o){const{angle:e,spread:n,length:r}=o,p=d+Math.cos(e-n/2)*r,f=g+Math.sin(e-n/2)*r,y=d+Math.cos(e+n/2)*r,b=g+Math.sin(e+n/2)*r,x=h.createLinearGradient(d,g,d+Math.cos(e)*r,g+Math.sin(e)*r);x.addColorStop(0,`rgba(0, 0, 0, ${a})`),x.addColorStop(1,"rgba(0, 0, 0, 0)"),h.fillStyle=x,h.beginPath(),h.moveTo(d,g),h.lineTo(p,f),h.lineTo(y,b),h.closePath(),h.fill(),i&&(t.fillStyle=`rgba(${l.r}, ${l.g}, ${l.b}, ${.3*a})`,t.beginPath(),t.moveTo(s,c),t.lineTo(s+Math.cos(e-n/2)*r,c+Math.sin(e-n/2)*r),t.lineTo(s+Math.cos(e+n/2)*r,c+Math.sin(e+n/2)*r),t.closePath(),t.fill())}}),t.globalCompositeOperation="source-over",t.drawImage(s,n,r)}export{s as Camera,f as CircularLigth,y as ConeLight,g as cropImage,h as drawAABBOutline,o as drawCircle,a as drawCircleOutline,c as drawFPS,n as drawGradientCircle,r as drawGradientTriangle,t as drawPolygon,e as drawPolygonOutline,l as drawRectangle,i as drawTriangle,d as loadImageLazy,p as playAnimation,b as setDarkOverlayUnified};
